<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating a Bare Bones Cataloging Module - Systems Librarianship</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="Entry level book on systems librarianship.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="p1-systems-librarianship.html"><strong aria-hidden="true">1.</strong> Systems Librarianship</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="1a-history-linux-unix.html"><strong aria-hidden="true">1.1.</strong> History of Unix and Linux</a></li><li class="chapter-item expanded "><a href="1b-what-is-linux.html"><strong aria-hidden="true">1.2.</strong> What is Linux?</a></li><li class="chapter-item expanded "><a href="1c-what-is-sysadmin.html"><strong aria-hidden="true">1.3.</strong> What is Systems Administration?</a></li><li class="chapter-item expanded "><a href="1d-what-is-syslib.html"><strong aria-hidden="true">1.4.</strong> What is Systems Librarianship?</a></li></ol></li><li class="chapter-item expanded "><a href="p2-project-management.html"><strong aria-hidden="true">2.</strong> Project Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="2a-using-gcloud-virtual-machines.html"><strong aria-hidden="true">2.1.</strong> Using gcloud for Virtual Machines</a></li><li class="chapter-item expanded "><a href="2b-using-git-github-for-documentation.html"><strong aria-hidden="true">2.2.</strong> Using Git and GitHub for Documentation</a></li></ol></li><li class="chapter-item expanded "><a href="p3-learning-the-command-line.html"><strong aria-hidden="true">3.</strong> Learning the Command Line</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="3a-learn-the-cli.html"><strong aria-hidden="true">3.1.</strong> Learn the CLI</a></li><li class="chapter-item expanded "><a href="3b-learn-nano.html"><strong aria-hidden="true">3.2.</strong> Using the Nano Text Editor</a></li><li class="chapter-item expanded "><a href="3c-searching-with-grep.html"><strong aria-hidden="true">3.3.</strong> Searching with grep</a></li><li class="chapter-item expanded "><a href="3d-managing-software.html"><strong aria-hidden="true">3.4.</strong> Managing Software</a></li><li class="chapter-item expanded "><a href="3e-library-search.html"><strong aria-hidden="true">3.5.</strong> Library Search</a></li></ol></li><li class="chapter-item expanded "><a href="p4-creating-a-lamp-server.html"><strong aria-hidden="true">4.</strong> Creating a LAMP Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="4a-installing-the-apache-web-server.html"><strong aria-hidden="true">4.1.</strong> Installing the Apache Web Server</a></li><li class="chapter-item expanded "><a href="4b-installing-configuring-php.html"><strong aria-hidden="true">4.2.</strong> Installing and Configuring PHP</a></li><li class="chapter-item expanded "><a href="4c-installing-configuring-mysql.html"><strong aria-hidden="true">4.3.</strong> Installing and Configuring MySQL</a></li><li class="chapter-item expanded "><a href="4d-basic-opac.html"><strong aria-hidden="true">4.4.</strong> Creating a Bare Bones OPAC</a></li><li class="chapter-item expanded "><a href="4e-basic-opac-admin.html" class="active"><strong aria-hidden="true">4.5.</strong> Creating a Bare Bones Cataloging Module</a></li></ol></li><li class="chapter-item expanded "><a href="p5-installing-content-management-systems.html"><strong aria-hidden="true">5.</strong> Installing Content Management Systems</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="5a-install-wordpress.html"><strong aria-hidden="true">5.1.</strong> Install Wordpress</a></li><li class="chapter-item expanded "><a href="5b-install-omeka.html"><strong aria-hidden="true">5.2.</strong> Install Omeka</a></li></ol></li><li class="chapter-item expanded "><a href="p6-installing-an-ILS.html"><strong aria-hidden="true">6.</strong> Installing an Integrated Library System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="6a-install-koha.html"><strong aria-hidden="true">6.1.</strong> Install Koha</a></li></ol></li><li class="chapter-item expanded "><a href="p7-conclusion.html"><strong aria-hidden="true">7.</strong> Conclusion</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Systems Librarianship</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cseanburns/systems_librarianship" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="creating-a-bare-bones-cataloging-module"><a class="header" href="#creating-a-bare-bones-cataloging-module">Creating a Bare Bones Cataloging Module</a></h1>
<p>If you have worked with an integrated library system
(or took my electronic resource management class),
then you know that an OPAC is simply one module out
of several that makeup an integrated library system (ILS).
Integrated library systems, and the
newer library service platforms (LSP),
provide <a href="https://cseanburns.net/WWW/ERM-book/04-erm-ils.html#administration">other modules for other types of work</a>.
These include modules for acquisitions, authority files,
circulation, course reserves, patron management, and more.</p>
<p>In this section,
we are going to create a bare bones cataloging module in
the same kind of way that we created a bare bones OPAC.
Up until this point,
you have been adding records to your OPAC
using the MySQL command interface.
But unless you are a full time database administrator
or programmer,
it's unlikely that you would add data to your system
via that interface.
Instead you would use a fancy graphical user interface,
which is what integrated library systems provide.
The reason we started off with MySQL is not because
you would necessarily use this interface on a daily basis.
Rather, it's because I want you to understand the
foundations of these technologies.</p>
<h2 id="creating-the-html-page-and-a-php-cataloging-page"><a class="header" href="#creating-the-html-page-and-a-php-cataloging-page">Creating the HTML Page and a PHP Cataloging Page</a></h2>
<p>Like in the last excerise,
the first thing we do is create a basic HTML page that
contains a form for entering our bibliographic data.
Again, our cataloging <em>module</em> will not be
real world like.
The goal here is to build an intuition about
how these technologies work and
to also provide some grounding if you do want
to pursue a more technical path.</p>
<p>The form that we will create also needs to mirror
the data structure in the <strong>books</strong> table that we
created in our prior lesson.
That means it will only contain four fields:</p>
<ul>
<li>author</li>
<li>title</li>
<li>publisher</li>
<li>copyright</li>
</ul>
<p>I'll call this page <strong>index.html</strong>.
I'll create a new directory for this module:</p>
<pre><code>cd /var/www/html
sudo mkdir cataloging
</code></pre>
<p>Then I'll use nano to create the index.html
file and add the content:</p>
<pre><code>cd cataloging
sudo nano index.html
</code></pre>
<p>In <strong>index.html</strong>, 
we add the following content:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;Enter Records&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;h1&gt;OPAC Library Administration&lt;/h1&gt;

	&lt;p&gt;This is the library administration page for entering records into the OPAC.&lt;/p&gt;
	&lt;p&gt;Please do not use this page unless you are an authorized cataloger.&lt;/p&gt;

	&lt;form action=&quot;insert.php&quot; method=&quot;post&quot;&gt;
		&lt;label for=&quot;author&quot;&gt;Author:&lt;/label&gt;
		&lt;input type=&quot;text&quot; name=&quot;author&quot; id=&quot;author&quot; required&gt;&lt;br&gt;&lt;br&gt;

		&lt;label for=&quot;title&quot;&gt;Book Title:&lt;/label&gt;
		&lt;input type=&quot;text&quot; name=&quot;title&quot; id=&quot;title&quot; required&gt;&lt;br&gt;&lt;br&gt;

		&lt;label for=&quot;publisher&quot;&gt;Publisher:&lt;/label&gt;
		&lt;input type=&quot;text&quot; name=&quot;publisher&quot; id=&quot;publisher&quot; required&gt;&lt;br&gt;&lt;br&gt;

		&lt;label for=&quot;copyright&quot;&gt;Copyright:&lt;/label&gt;
		&lt;input type=&quot;date&quot; id=&quot;copyright&quot; name=&quot;copyright&quot;&gt;

		&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="php-insert-script"><a class="header" href="#php-insert-script">PHP Insert Script</a></h2>
<p>The <strong>index.html</strong> page will provide a user interface,
that is, a form,
for entering our bibliographic data.
However, the PHP script is needed
to communicate and add the data from our
form into our MySQL database and <strong>books</strong> table.</p>
<p>Also, just as the HTML form has to
match the data structure of the <strong>books</strong> table,
the PHP script also needs to match the form
from the HTML page and the data structure
in the <strong>books</strong> table.</p>
<p>Here is the PHP script,
which I call <strong>insert.php</strong>:</p>
<pre><code>&lt;?php

// Load MySQL credentials
require_once '../login.php';

// Establish connection
$conn = mysqli_connect($db_hostname, $db_username, $db_password) or
  die(&quot;Unable to connect&quot;);

// Open database
mysqli_select_db($conn, $db_database) or
  die(&quot;Could not open database '$db_database'&quot;);

// Prepare and bind SQL statement
$stmt = $conn-&gt;prepare(&quot;INSERT INTO books (author, title, publisher, copyright) VALUES (?, ?, ?, ?)&quot;);
$stmt-&gt;bind_param(&quot;ssss&quot;, $author, $title, $publisher, $copyright);

// Set parameters and execute statement
$author = $_POST[&quot;author&quot;];
$title = $_POST[&quot;title&quot;];
$publisher = $_POST[&quot;publisher&quot;];
$copyright = $_POST[&quot;copyright&quot;];

if ($stmt-&gt;execute() === TRUE) {
    echo &quot;New record created successfully&quot;;
} else {
    echo &quot;Error: &quot; . $stmt-&gt;error;
}

// Close statement and connection
$stmt-&gt;close();
$conn-&gt;close();

echo &quot;&lt;p&gt;Return to the cataloging page: &lt;a href='http://11.111.111.111/cataloging/'&gt;http://11.111.111.111/cataloging/&lt;/a&gt;&lt;/p&gt;&quot;;
?&gt;
</code></pre>
<h2 id="security"><a class="header" href="#security">Security</a></h2>
<p>Since our HTML and PHP files allow us
to enter data into our MySQL database
from a simple web interface,
we need to limit access to the module.
Again, in a real-world situation,
modules like these would have a variety of
security measures in place to prevent
wrongful data entry.
In our case,
we will rely on a simple authorization
mechanism provided by the Apache2 server
called <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-password-authentication-with-apache-on-ubuntu-18-04">htpasswd</a>.</p>
<p>First, we create an authentication file
in our <strong>/etc/apache2</strong> directory,
which is where the <strong>Apache2</strong> web server
stores its configuration files.
The file will contain a <strong>hashed</strong> password
and a username we give it.
In the following command,
I set the username to <strong>libcat</strong>, but
it could be anything:</p>
<pre><code>sudo htpasswd -c /etc/apache2/.htpasswd libcat
</code></pre>
<p>Next we need to tell the Apache2 web server
that we will use the <code>htpasswd</code> to control
access to our cataloging module.
To do that,
we use <code>nano</code> to open the <strong>apache2.conf</strong> file.
We need</p>
<pre><code>sudo nano /etc/apache2/apache2.conf
</code></pre>
<p>In the <strong>apache2.conf</strong> file,
look for the following code block / stanza.
We are interested in the third line in the stanza,
which is line 173 for me, and
probably is for you, too.</p>
<pre><code>&lt;Directory /var/www/&gt;
  Options Indexes FollowSymLinks
  AllowOverride None
  Require all granted
&lt;/Directory&gt;
</code></pre>
<p>Carefully, we need to change the word
<strong>None</strong> to the word <strong>All</strong>:</p>
<pre><code>&lt;Directory /var/www/&gt;
  Options Indexes FollowSymLinks
  AllowOverride All
  Require all granted
&lt;/Directory&gt;
</code></pre>
<p>Next, change to the <strong>cataloging</strong> directory and
use <code>nano</code> to create a file called <strong>.htaccess</strong>
(note the leading period):</p>
<pre><code>cd /var/www/html/cataloging
sudo nano .htaccess
</code></pre>
<p>Add the following content to <strong>.htaccess</strong>:</p>
<pre><code>AuthType Basic
AuthName &quot;Authorization Required&quot;
AuthUserFile /etc/apache2/.htpasswd
Require valid-user
</code></pre>
<p>Check that the configuration file is okay:</p>
<pre><code>apachectl configtest
</code></pre>
<p>If you get a <strong>Syntax OK</strong> message,
then restart Apache2 and
check its status:</p>
<pre><code>sudo systemctl restart apache2
systemctl status apache2
</code></pre>
<p>Now visit your cataloging module.
You should be required to enter the username
and password that you created with <code>htpasswd</code>.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>In the last lesson,
we created a very bare bones OPAC
that would allow patrons to
search our catalog.
In this lesson,
we learned how to create a very
bare bones cataloging module
that would allow librarians
to add bibliographic data
and records to our OPAC.</p>
<p>Add some records using the above form,
and then return to your OPAC and
conduct some queries to confirm
that the new records have been added.</p>
<p>You can also use the MySQL command line
interface to view the new records,
just like we did a couple of lessons ago.</p>
<p>In a production level environment,
we would add quite a bit more.
Our MySQL database would contain
many more tables that allow storing
data related to the modules listed above.
We would also like to make our modules
graphically attractive and provide more content.
That would mean we would add
<a href="https://en.wikipedia.org/wiki/CSS">Cascading Style Sheets (CSS)</a> and
<a href="https://en.wikipedia.org/wiki/JavaScript">JavaScript</a> to create an
attractive and usable interface.
But that would be a whole other class.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="4d-basic-opac.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="p5-installing-content-management-systems.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="4d-basic-opac.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="p5-installing-content-management-systems.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
